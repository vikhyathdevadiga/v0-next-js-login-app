name: Deploy Pipeline

on: [push]

jobs:
  request-approval:
    runs-on: ubuntu-latest
    steps:
      - name: Wait for Approval with Timeout
        run: |
          echo "Waiting for approval (10 seconds)..."
          timeout 10 bash -c 'while [ ! -f /tmp/approved ]; do sleep 1; done' || {
            echo "Approval timeout - failing workflow"
            exit 1
          }
        # In practice, you'd integrate with your approval system API

  wait-for-build:
    needs: request-approval
    steps:
      - run: echo "Building..."

  deploy-to-production:
    needs: wait-for-build
    steps:
      - run: echo "Deploying..."
